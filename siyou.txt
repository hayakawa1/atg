# AI Talk Gallery (ATG) 仕様書

## システム概要
ChatGPTとの面白い会話を共有するためのWebアプリケーション。ユーザーは会話のURLと内容を投稿し、他のユーザーと共有することができます。

## 技術スタック
- バックエンド: Python (Flask)
- フロントエンド: HTML, CSS, JavaScript
- データベース: SQLite
- 認証: Google OAuth 2.0
- HTTPS: 自己署名証明書を使用

## データベース設計
### Users テーブル
- id: 主キー
- name: ユーザー名
- email: メールアドレス
- profile_pic: プロフィール画像URL
- created_at: 作成日時

### Posts テーブル
- id: 主キー
- user_id: 投稿者ID (外部キー)
- content: 投稿内容
- url: ChatGPTの会話URL
- created_at: 作成日時
- ip_address: 投稿者のIPアドレス
- reply_to_id: 返信先の投稿ID (外部キー)

### Tags テーブル
- id: 主キー
- name: タグ名

### PostTags テーブル
- post_id: 投稿ID (外部キー)
- tag_id: タグID (外部キー)

### Favorites テーブル
- user_id: ユーザーID (外部キー)
- post_id: 投稿ID (外部キー)

## 機能一覧
### 1. 認証機能
- Google OAuth 2.0を使用したログイン/ログアウト
- ログイン状態の維持

### 2. 投稿機能
- ChatGPTの会話URLと内容の投稿
- タグの付与（カンマ区切りで複数指定可能）
- 投稿者のIPアドレスを記録
- 投稿の編集・削除（未実装）

### 3. リプライ機能
- 既存の投稿に対する返信
- リプライツリーの表示
- リプライ数の表示

### 4. お気に入り機能
- 投稿のお気に入り登録/解除
- お気に入り投稿の一覧表示
- お気に入り数の表示

### 5. タグ機能
- 投稿へのタグ付け
- タグによる投稿のフィルタリング
- 人気タグの表示（右サイドバー）

### 6. UI/UX
- ダークテーマ
- レスポンシブデザイン
- 無限スクロール
- アニメーション効果
- ツールチップによる機能説明

### 7. その他
- 投稿の時間表示（相対時間）
- エラーハンドリング
- XSS対策
- CSRF対策

## セキュリティ要件
- HTTPS通信の強制
- SQLインジェクション対策
- XSS対策
- CSRF対策
- セッション管理
- 適切なエラーハンドリング

## 制限事項
- 投稿の編集は未実装
- 投稿の削除は未実装
- ユーザープロフィールの編集は未実装
- 画像のアップロードは未実装

## 開発環境
- Python 3.8以上
- Flask 2.0以上
- SQLite 3
- モダンブラウザ（Chrome, Firefox, Safari, Edge）
